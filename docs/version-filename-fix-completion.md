# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –≤–µ—Ä—Å–∏–µ–π –≤ –∏–º–µ–Ω–∞—Ö —Ñ–∞–π–ª–æ–≤ —Ä–µ–ª–∏–∑–∞ - –ó–ê–í–ï–†–®–ï–ù–û

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Ä–µ–ª–∏–∑–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ–¥—Å—Ç–∞–≤–ª—è–ª–∞—Å—å –≤–µ—Ä—Å–∏—è –∏–∑ `package.json`, –∞ –Ω–µ —Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–µ–ª–∏–∑–∞ –≤ GitHub Actions.

## üîç –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

1. **GitHub Actions –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `1.0.20`) —á–µ—Ä–µ–∑ `semantic-version` action
2. **–û–±–Ω–æ–≤–ª—è–µ—Ç package.json** –≤ job `version` —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π  
3. **–ù–û** job `build` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** –∏ –Ω–µ –∂–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è package.json
4. **`forge.config.ts`** –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤–µ—Ä—Å–∏—é –∏–∑ **—Å—Ç–∞—Ä–æ–≥–æ** package.json –≤–æ –≤—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—è

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –≤ forge.config.ts**

–ò–∑–º–µ–Ω–∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `APP_VERSION`:

```typescript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏
function getAppVersion(): string {
  // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –≤–∑—è—Ç—å –≤–µ—Ä—Å–∏—é –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è CI/CD)
  if (process.env.APP_VERSION) {
    return process.env.APP_VERSION;
  }
  
  // –ò–Ω–∞—á–µ —á–∏—Ç–∞–µ–º –∏–∑ package.json
  try {
    const packageData = JSON.parse(fs.readFileSync('./package.json', 'utf8'));
    return packageData.version;
  } catch (error) {
    console.warn('Warning: Could not read package.json, using default version');
    return '1.0.0';
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
new MakerSquirrel({
  setupExe: `bottle-code-wh-app-${appVersion}-setup.exe`,
  // ...
}),
new MakerDMG({
  name: `bottle-c-wh-${appVersion}`,
  // ...
})
```

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ DMG –∏–º–µ–Ω–∏**

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω `scripts/check-dmg-name.cjs` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–π –∂–µ –ª–æ–≥–∏–∫–∏:

```javascript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ (—Ç–∞–∫–∞—è –∂–µ –∫–∞–∫ –≤ forge.config.ts)
function getAppVersion() {
  // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –≤–∑—è—Ç—å –≤–µ—Ä—Å–∏—é –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è CI/CD)
  if (process.env.APP_VERSION) {
    return process.env.APP_VERSION;
  }
  
  // –ò–Ω–∞—á–µ —á–∏—Ç–∞–µ–º –∏–∑ package.json
  try {
    const packagePath = path.join(__dirname, '..', 'package.json');
    const packageData = JSON.parse(fs.readFileSync(packagePath, 'utf8'));
    return packageData.version;
  } catch (error) {
    console.warn('Warning: Could not read package.json, using default version');
    return '1.0.0';
  }
}
```

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω GitHub Actions workflow**

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `APP_VERSION` –≤ —à–∞–≥–∏ —Å–±–æ—Ä–∫–∏:

```yaml
- name: Build and make application (production)
  if: needs.version.outputs.release_type == 'stable'
  shell: bash
  run: |
    echo "üè≠ Building production release with stable API URL..."
    echo "üì¶ Using version: ${{ needs.version.outputs.new_version }}"
    npm run make
  env:
    NODE_ENV: production
    APP_VERSION: ${{ needs.version.outputs.new_version }}
    
- name: Check macOS DMG configuration
  if: runner.os == 'macOS'
  run: |
    echo "üîç Checking macOS DMG name configuration..."
    npm run check:dmg
  env:
    APP_VERSION: ${{ needs.version.outputs.new_version }}
```

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### **–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞—Ä–æ–ª–µ–º –∞—Ä—Ö–∏–≤–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤**

–¢–∞–∫–∂–µ –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ø–∞—Ä–æ–ª–µ–π –¥–ª—è –∞—Ä—Ö–∏–≤–æ–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:

1. **–£–±—Ä–∞–Ω—ã —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã** –∏–∑ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
2. **–£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–æ–≤** —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –¥–ª—è Linux (CI/CD)
3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏–≤–∞** —Å –ø–∞—Ä–æ–ª–µ–º –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
4. **–°–æ–∑–¥–∞–µ—Ç—Å—è fallback —Ä–µ—à–µ–Ω–∏–µ** –¥–ª—è Windows –±–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

```javascript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è —Ç–æ–ª—å–∫–æ –∏–∑ –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä
function generatePassword(length = 16) {
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  // ...
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞
function verifyArchive(archivePath, password) {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä—Ö–∏–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
  // Linux: unzip -P password
  // Windows: 7z/WinRAR –∏–ª–∏ fallback —Å PASSWORD.txt
  // macOS: unzip -P password
}
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**

1. **–í–µ—Ä—Å–∏—è –≤ –∏–º–µ–Ω–∞—Ö —Ñ–∞–π–ª–æ–≤** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤ GitHub Actions
2. **DMG –ø—Ä–æ–≤–µ—Ä–∫–∞** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
3. **–ê—Ä—Ö–∏–≤—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** —Å–æ–∑–¥–∞—é—Ç—Å—è —Å —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –ø–∞—Ä–æ–ª—è–º–∏
4. **Fallback —Ä–µ—à–µ–Ω–∏—è** –¥–ª—è —Å–∏—Å—Ç–µ–º –±–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

### **–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤:**

```
# –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è 1.0.20
bottle-code-wh-app-1.0.20-setup.exe
bottle-c-wh-1.0.20.dmg
secure-certificates-v1.0.20.zip

# –ë–µ—Ç–∞ –≤–µ—Ä—Å–∏—è 1.0.20-beta.1  
bottle-code-wh-app-1.0.20-beta.1-setup.exe
bottle-c-wh-1.0.20-beta.1.dmg
secure-certificates-v1.0.20-beta.1.zip
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```powershell
# –¢–µ—Å—Ç —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
$env:APP_VERSION="1.0.20"
npm run check:dmg

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# üì¶ –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: 1.0.20
# üìÅ –ò–º—è DMG: "bottle-c-wh-1.0.20"
# üìè –î–ª–∏–Ω–∞ –∏–º–µ–Ω–∏: 18 —Å–∏–º–≤–æ–ª–æ–≤
# ‚úÖ –ò–º—è DMG —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º macOS
```

### **–¢–µ—Å—Ç –∞—Ä—Ö–∏–≤–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:**

```powershell
$env:VERSION="1.0.20"
node scripts/secure-certificates.cjs --test

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# ‚úÖ Archive created with working password
# üîë Password verification successful
```

## üìã –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- ‚úÖ `forge.config.ts` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
- ‚úÖ `scripts/check-dmg-name.cjs` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –≤–µ—Ä—Å–∏–π
- ‚úÖ `.github/workflows/release.yml` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è APP_VERSION
- ‚úÖ `scripts/secure-certificates.cjs` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–æ–ª–∏ –∞—Ä—Ö–∏–≤–æ–≤

## üéØ –°–ª–µ–¥—É—é—â–∏–π —Ä–µ–ª–∏–∑

–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ–ª–∏–∑–µ —á–µ—Ä–µ–∑ `git push origin release-stable` –∏–ª–∏ `git push origin release-beta`:

1. GitHub Actions —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
2. –ü–µ—Ä–µ–¥–∞—Å—Ç –µ—ë –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `APP_VERSION`
3. –í—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∏–º–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
4. –ê—Ä—Ö–∏–≤—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 11 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETED  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ PASSED  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production:** ‚úÖ READY
