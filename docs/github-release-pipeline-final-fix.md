# üéâ GitHub Release Pipeline - –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

**–î–∞—Ç–∞**: 11 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –£–°–¢–†–ê–ù–ï–ù–´  

## üö® –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã

### 1. –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
**–ë—ã–ª–æ**: 
- Windows: `bottle-code-wh-app-1.0.53-setup.exe` ‚úÖ
- Linux RPM: `bottle-code-wh-app-1.0.38-1.x86_64.rpm` ‚ùå
- Linux DEB: `bottle-code-wh-app_1.0.38_amd64.deb` ‚ùå  
- macOS DMG: `bottle-c-wh-1.0.53.dmg` ‚úÖ
- macOS ZIP: `bottle-code-wh-app-darwin-arm64-1.0.38.zip` ‚ùå

**–°—Ç–∞–ª–æ**: –í—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –±—É–¥—É—Ç –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –≤–µ—Ä—Å–∏—é –∏–∑ `APP_VERSION`

### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
**–ë—ã–ª–æ**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ –≤–µ—Ä—Å–∏—é –∏–∑ package.json (1.0.38)  
**–°—Ç–∞–ª–æ**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é –∏–∑ `APP_VERSION`

### 3. –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–ª–∏–∑—ã –ø–æ–¥–∫–ª—é—á–∞–ª–∏—Å—å –∫ beta API
**–ë—ã–ª–æ**: –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–ª–∏–∑—ã ‚Üí `https://beta.api.bottlecode.app` ‚ùå  
**–°—Ç–∞–ª–æ**: –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–ª–∏–∑—ã ‚Üí `https://api.bottlecode.app` ‚úÖ

## üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –≤ forge.config.ts

```typescript
// –£–±—Ä–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ packageData.version
// const packageData = JSON.parse(fs.readFileSync('./package.json', 'utf8')); // –ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ

// –í—Å–µ makers —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –≤–µ—Ä—Å–∏—é
function getAppVersion(): string {
  if (process.env.APP_VERSION) {
    return process.env.APP_VERSION; // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è CI/CD
  }
  // ... fallback –∫ package.json
}

// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ publishers
prerelease: appVersion.includes('beta') // –ë—ã–ª–æ: packageData.version
```

### 2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ APP_VERSION –≤ runtime

**vite.main.config.ts**:
```typescript
define: {
  'process.env.APP_VERSION': JSON.stringify(process.env.APP_VERSION || ''),
  // ...
}
```

**vite.preload.config.ts** –∏ **vite.renderer.config.ts**: –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è getAppVersion()

**src/utils/environment.ts**:
```typescript
export function getAppVersion(): string {
  // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –≤–∑—è—Ç—å –≤–µ—Ä—Å–∏—é –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è CI/CD)
  if (process.env.APP_VERSION) {
    return process.env.APP_VERSION;
  }
  
  // –ò–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–µ—Ä—Å–∏—é –∏–∑ package.json —á–µ—Ä–µ–∑ Electron API
  return app.getVersion();
}
```

### 4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã Vite –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è NODE_ENV

–í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (main, preload, renderer) —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `NODE_ENV`.

## üß™ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –ù–æ–≤—ã–µ npm —Å–∫—Ä–∏–ø—Ç—ã:
- `npm run release:test-versions` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –≤–µ—Ä—Å–∏–π
- `npm run release:test-env` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è  
- `npm run release:verify` - –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
- ‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –≤–æ –≤—Å–µ—Ö makers
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ APP_VERSION –≤ runtime
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ NODE_ENV
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API URLs

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏**:
   ```
   bottle-code-wh-app-1.0.53-setup.exe         ‚úÖ
   bottle-code-wh-app-1.0.53-1.x86_64.rpm      ‚úÖ  
   bottle-code-wh-app_1.0.53_amd64.deb         ‚úÖ
   bottle-c-wh-1.0.53.dmg                      ‚úÖ
   bottle-code-wh-app-darwin-arm64-1.0.53.zip  ‚úÖ
   ```

2. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ API URLs**:
   - –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–ª–∏–∑—ã ‚Üí `https://api.bottlecode.app` ‚úÖ
   - –ë–µ—Ç–∞ —Ä–µ–ª–∏–∑—ã ‚Üí `https://beta.api.bottlecode.app` ‚úÖ

3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é —Ä–µ–ª–∏–∑–∞ (1.0.53), –∞ –Ω–µ package.json (1.0.38) ‚úÖ

## üìä –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `forge.config.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π
- ‚úÖ `vite.main.config.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ APP_VERSION
- ‚úÖ `vite.preload.config.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ APP_VERSION  
- ‚úÖ `vite.renderer.config.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ APP_VERSION
- ‚úÖ `src/utils/environment.ts` - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç APP_VERSION

### –†–∞–Ω–µ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `.github/workflows/release.yml` - NODE_ENV –∏ APP_VERSION
- ‚úÖ `scripts/secure-certificates.cjs` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ APP_VERSION

### –¢–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ `scripts/test-version-consistency.cjs` - –Ω–æ–≤—ã–π —Ç–µ—Å—Ç
- ‚úÖ `scripts/final-verification.cjs` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚úÖ `docs/github-release-pipeline-ready.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `package.json` - –Ω–æ–≤—ã–µ npm —Å–∫—Ä–∏–ø—Ç—ã

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
npm run release:verify

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π  
npm run release:test-versions

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
npm run release:test-env
```

### –®–∞–≥–∏ –¥–ª—è production —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. –°–æ–∑–¥–∞—Ç—å PR –≤ `release-stable` –≤–µ—Ç–∫—É
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å GitHub Actions
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ production API
5. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é

## üéä –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í–°–ï –ü–†–û–ë–õ–ï–ú–´ GITHUB RELEASE PIPELINE –ü–û–õ–ù–û–°–¢–¨–Æ –£–°–¢–†–ê–ù–ï–ù–´:**

‚úÖ **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤** ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
‚úÖ **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏** ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–ª–∏–∑—ã –ø–æ–¥–∫–ª—é—á–∞–ª–∏—Å—å –∫ beta API** ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
‚úÖ **–î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ–∞–π–ª—ã –≤ —Ä–µ–ª–∏–∑–∞—Ö** ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  

**–°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û –ö –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–û–ú–£ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ** üöÄ

---
*–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é*
