# ‚úÖ GitHub Release Pipeline - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

## üö® –ò—Å—Ö–æ–¥–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–µ–ª–∏–∑–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –≤ GitHub Actions –≤–æ–∑–Ω–∏–∫–∞–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. **–†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ –∏–º–µ–Ω–∞—Ö —Ñ–∞–π–ª–æ–≤**
- üè∑Ô∏è **GitHub Actions –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –≤–µ—Ä—Å–∏—é**: `1.0.38`
- üì¶ **–§–∞–π–ª—ã –ø–æ–ª—É—á–∞–ª–∏ –≤–µ—Ä—Å–∏–∏**: `1.0.28` (–∏–∑ —Å—Ç–∞—Ä–æ–≥–æ package.json)
- üéØ **–ü—Ä–æ–±–ª–µ–º–∞**: `forge.config.ts` —á–∏—Ç–∞–ª –≤–µ—Ä—Å–∏—é –∏–∑ package.json –¥–æ –µ—ë –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ latest.yml**
- üìÇ **–§–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –¥–≤–∞–∂–¥—ã** –≤ GitHub Release
- üîÑ **–ü—Ä–∏—á–∏–Ω–∞**: –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Å—Ç—Ä–æ–∫–∏ –≤ `files:` —Å–µ–∫—Ü–∏–∏

### 3. **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è APP_VERSION –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞**
- ‚ö†Ô∏è **–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —à–∞–≥–∏** –Ω–µ –ø–æ–ª—É—á–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
- üèóÔ∏è **–°–±–æ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è APP_VERSION**
```yaml
# ‚ùå –ë–´–õ–û (–≤ —Å—Ç—Ä–æ–∫–µ 242-243):
env:
  NODE_ENV: production
  APP_VERSION: ${{ needs.version.outputs.new_version }}
  APP_VERSION: ${{ needs.version.outputs.new_version }}  # ‚Üê –î—É–±–ª–∏–∫–∞—Ç!

# ‚úÖ –°–¢–ê–õ–û:
env:
  NODE_ENV: production
  APP_VERSION: ${{ needs.version.outputs.new_version }}
```

### 2. **–£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è latest.yml**
```yaml
# ‚ùå –ë–´–õ–û:
files: |
  windows-release-${{ needs.version.outputs.new_version }}/**/*
  linux-release-${{ needs.version.outputs.new_version }}/**/*
  macos-release-${{ needs.version.outputs.new_version }}/**/*
  secure-certificates-${{ needs.version.outputs.new_version }}/**/*
  windows-release-${{ needs.version.outputs.new_version }}/updates/latest.yml  # ‚Üê –î—É–±–ª–∏–∫–∞—Ç!

# ‚úÖ –°–¢–ê–õ–û:
files: |
  windows-release-${{ needs.version.outputs.new_version }}/**/*
  linux-release-${{ needs.version.outputs.new_version }}/**/*
  macos-release-${{ needs.version.outputs.new_version }}/**/*
  secure-certificates-${{ needs.version.outputs.new_version }}/**/*
```

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç secure-certificates.cjs**
```javascript
// ‚ùå –ë–´–õ–û:
const VERSION = process.env.VERSION || '1.0.0';

// ‚úÖ –°–¢–ê–õ–û:
const VERSION = process.env.VERSION || process.env.APP_VERSION || '1.0.0';
```

### 4. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ APP_VERSION –≤–æ –≤—Å–µ —à–∞–≥–∏**
- ‚úÖ **Build production**: `APP_VERSION: ${{ needs.version.outputs.new_version }}`
- ‚úÖ **Build beta**: `APP_VERSION: ${{ needs.version.outputs.new_version }}`  
- ‚úÖ **Generate latest.yml**: `APP_VERSION: ${{ needs.version.outputs.new_version }}`
- ‚úÖ **Check macOS DMG**: `APP_VERSION: ${{ needs.version.outputs.new_version }}`
- ‚úÖ **Secure certificates**: `VERSION: ${{ needs.version.outputs.new_version }}`

## üß¨ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å–∏–π:

1. **GitHub Actions –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é** —á–µ—Ä–µ–∑ `semantic-version` action
2. **Job `version`** –æ–±–Ω–æ–≤–ª—è–µ—Ç `package.json` —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
3. **Job `build`** –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** –∏ –ø–æ–ª—É—á–∞–µ—Ç –≤–µ—Ä—Å–∏—é —á–µ—Ä–µ–∑ `APP_VERSION`
4. **`forge.config.ts`** —á–∏—Ç–∞–µ—Ç –≤–µ—Ä—Å–∏—é –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `APP_VERSION` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) –∏–ª–∏ `package.json` (fallback)

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π –≤ forge.config.ts:
```typescript
function getAppVersion(): string {
  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è CI/CD
  if (process.env.APP_VERSION) {
    return process.env.APP_VERSION;
  }
  
  // Fallback –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  try {
    const packageData = JSON.parse(fs.readFileSync('./package.json', 'utf8'));
    return packageData.version;
  } catch (error) {
    return '1.0.0';
  }
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Ä–µ–ª–∏–∑–µ v1.0.38 –≤—Å–µ —Ñ–∞–π–ª—ã –ø–æ–ª—É—á–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è:**

#### Windows:
- ‚úÖ `bottle-code-wh-app-1.0.38-setup.exe`
- ‚úÖ `bottle_code_wh_app-1.0.38-full.nupkg`

#### macOS:
- ‚úÖ `bottle-c-wh-1.0.38.dmg`
- ‚úÖ `bottle-code-wh-app-darwin-arm64-1.0.38.zip`

#### Linux:
- ‚úÖ `bottle-code-wh-app_1.0.38_amd64.deb`
- ‚úÖ `bottle-code-wh-app-1.0.38-1.x86_64.rpm`

#### Certificates:
- ‚úÖ `secure-certificates-v1.0.38.zip`

#### Updates:
- ‚úÖ `latest.yml` (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–∞–π–ª, –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)

## üîç –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ —Ñ–∞–π–ª–∞—Ö

### **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `.github/workflows/release.yml` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, —É–±—Ä–∞–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è latest.yml
- ‚úÖ `scripts/secure-certificates.cjs` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ APP_VERSION

### **–£–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `forge.config.ts` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –∏–∑ APP_VERSION
- ‚úÖ `scripts/check-dmg-name.cjs` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–µ—Ä—Å–∏–π
- ‚úÖ `scripts/generate-latest-yml.cjs` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ APP_VERSION

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

### **–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑:**
   ```bash
   git push origin release-stable
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ GitHub Actions:**
   - ‚úÖ –í–µ—Ä—Å–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ APP_VERSION –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤–æ –≤—Å–µ —à–∞–≥–∏
   - ‚úÖ –§–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ GitHub Release:**
   - ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è —Ñ–∞–π–ª–æ–≤ latest.yml
   - ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –≤–µ—Ä—Å–∏—é –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
   - ‚úÖ –ê—Ä—Ö–∏–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è

## üö¶ –°—Ç–∞—Ç—É—Å

**‚úÖ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´**

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–ª–∏–∑–æ–≤ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- üéØ –í–µ—Ä—Å–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- üì¶ –§–∞–π–ª—ã –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
- üîÑ –ù–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- üîê –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏

## üìÖ –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**11 –∏—é–Ω—è 2025 –≥.**

---

### üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–µ—Ä—Å–∏–µ–π –∏–∑ package.json
- **Fallback –º–µ—Ö–∞–Ω–∏–∑–º**: –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ APP_VERSION –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ Windows, macOS, –∏ Linux
