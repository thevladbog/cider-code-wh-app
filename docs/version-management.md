# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –í–µ—Ä—Å–∏—è–º–∏ –≤ Release Pipeline

## –û–±–∑–æ—Ä

–í –Ω–∞—à–µ–º —Ä–µ–ª–∏–∑–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ—Ä—Å–∏–π —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –º–µ–∂–¥—É GitHub Actions –∏ `package.json`. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –í–µ—Ä—Å–∏–∏ –≤ GitHub Actions

–í workflow `release.yml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è action `paulhatch/semantic-version@v5.4.0` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–µ—Ä—Å–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ:

- **–í–µ—Ç–∫–∏**: `release-stable` (—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏) –∏–ª–∏ `release-beta` (–±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏)
- **–°–æ–æ–±—â–µ–Ω–∏–π –∫–æ–º–º–∏—Ç–æ–≤**: `(MAJOR)` –∏–ª–∏ `(MINOR)` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–ò—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–º–∏—Ç–æ–≤**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç patch-–≤–µ—Ä—Å–∏–∏

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ package.json

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–µ—Ä—Å–∏–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `package.json`:

```yaml
- name: Update package.json version
  run: |
    echo "üîÑ Updating package.json version to ${{ steps.semver.outputs.version }}"
    node scripts/update-package-version.cjs ${{ steps.semver.outputs.version }}
```

### 3. –ö–æ–º–º–∏—Ç –ò–∑–º–µ–Ω–µ–Ω–∏–π

–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `package.json` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```yaml
- name: Commit updated package.json
  run: |
    git config --local user.email "action@github.com"
    git config --local user.name "GitHub Action"
    git add package.json
    if git diff --staged --quiet; then
      echo "üìù No changes to package.json version"
    else
      git commit -m "chore: update version to ${{ steps.semver.outputs.version }} [skip ci]"
      git push
      echo "‚úÖ package.json version updated and pushed"
    fi
```

## –§–æ—Ä–º–∞—Ç—ã –í–µ—Ä—Å–∏–π

### –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–ª–∏–∑—ã (release-stable)
- –§–æ—Ä–º–∞—Ç: `MAJOR.MINOR.PATCH`
- –ü—Ä–∏–º–µ—Ä—ã: `1.0.0`, `1.2.3`, `2.0.0`

### –ë–µ—Ç–∞ —Ä–µ–ª–∏–∑—ã (release-beta)
- –§–æ—Ä–º–∞—Ç: `MAJOR.MINOR.PATCH-beta.INCREMENT`
- –ü—Ä–∏–º–µ—Ä—ã: `1.0.0-beta.1`, `1.2.3-beta.5`

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¢–∏–ø–æ–º –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- **Patch**: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (1.0.0 ‚Üí 1.0.1)
- **Minor**: –î–æ–±–∞–≤–∏—Ç—å `(MINOR)` –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ (1.0.0 ‚Üí 1.1.0)
- **Major**: –î–æ–±–∞–≤–∏—Ç—å `(MAJOR)` –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ (1.0.0 ‚Üí 2.0.0)

### –ü—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–º–º–∏—Ç–æ–≤

```bash
# Patch –≤–µ—Ä—Å–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ –ø–µ—á–∞—Ç–∏"

# Minor –≤–µ—Ä—Å–∏—è
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–∏–Ω—Ç–µ—Ä–∞ (MINOR)"

# Major –≤–µ—Ä—Å–∏—è  
git commit -m "feat!: –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω API –ø—Ä–∏–Ω—Ç–µ—Ä–∞ (MAJOR)"
```

## –õ–æ–∫–∞–ª—å–Ω—ã–µ –°–∫—Ä–∏–ø—Ç—ã

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –≤—Ä—É—á–Ω—É—é

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –≤ package.json
npm run version:update 1.2.3

# –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞ –±–µ—Ç–∞ –≤–µ—Ä—Å–∏—é
npm run version:update 1.2.3-beta.1
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```javascript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö
const { updatePackageVersion, isValidVersion } = require('./scripts/update-package-version.cjs');

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –≤–µ—Ä—Å–∏–∏
if (isValidVersion('1.2.3')) {
  updatePackageVersion('1.2.3');
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- GitHub Action –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ `contents: write` –¥–ª—è –∫–æ–º–º–∏—Ç–æ–≤
- –ö–æ–º–º–∏—Ç—ã –ø–æ–º–µ—á–µ–Ω—ã `[skip ci]` —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π email –∏ –∏–º—è GitHub Action

### –ü—Ä–æ–≤–µ—Ä–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –≤–µ—Ä—Å–∏–∏ (semver)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è `package.json`
- Graceful handling –æ—à–∏–±–æ–∫ JSON

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –≤ GitHub Actions
```
üîÑ Updating package.json version to 1.2.3
‚úÖ –í–µ—Ä—Å–∏—è –≤ package.json –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 1.0.0 ‚Üí 1.2.3  
‚úÖ package.json version updated and pushed
```

### –¢–µ–ª–µ–≥—Ä–∞–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–í–µ—Ä—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–ª–∏–∑–µ –≤ Telegram.

## –û—Ç–ª–∞–¥–∫–∞

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–í–µ—Ä—Å–∏—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ `contents: write` –≤ workflow
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∫—Ä–∏–ø—Ç `update-package-version.cjs` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

2. **–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–µ—Ä—Å–∏–∏**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (semver)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤–µ—Ä—Å–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é

3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∫–æ–º–º–∏—Ç–æ–≤**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `[skip ci]` –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–æ–º–º–∏—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `package.json`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
npm run test:scripts

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
npx vitest tests/scripts/update-package-version.test.js
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### Electron Builder
`package.json` –≤–µ—Ä—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Electron Forge –¥–ª—è:
- –ò–º–µ–Ω —Ñ–∞–π–ª–æ–≤ —Å–±–æ—Ä–∫–∏
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ò–º–µ–Ω –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

### GitHub Releases
–í–µ—Ä—Å–∏—è –∏–∑ `package.json` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å —Ç–µ–≥–∞–º–∏ —Ä–µ–ª–∏–∑–æ–≤ –≤ GitHub.

### –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
–í–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
