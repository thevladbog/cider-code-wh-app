var ft=Object.defineProperty;var ht=(r,t,e)=>t in r?ft(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var w=(r,t,e)=>ht(r,typeof t!="symbol"?t+"":t,e);import{g as G,c as C,a as pt}from"./index-D4cZ8UvI.js";function gt(r,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(r,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var Re={},ie={};const wt=new Proxy({},{get(r,t){throw new Error(`Module "stream" has been externalized for browser compatibility. Cannot access "stream.${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),yt=Object.freeze(Object.defineProperty({__proto__:null,default:wt},Symbol.toStringTag,{value:"Module"})),j=G(yt);Object.defineProperty(ie,"__esModule",{value:!0});ie.ByteLengthParser=void 0;const bt=j;class mt extends bt.Transform{constructor(e){super(e);w(this,"length");w(this,"position");w(this,"buffer");if(typeof e.length!="number")throw new TypeError('"length" is not a number');if(e.length<1)throw new TypeError('"length" is not greater than 0');this.length=e.length,this.position=0,this.buffer=Buffer.alloc(this.length)}_transform(e,i,o){let a=0;for(;a<e.length;)this.buffer[this.position]=e[a],a++,this.position++,this.position===this.length&&(this.push(this.buffer),this.buffer=Buffer.alloc(this.length),this.position=0);o()}_flush(e){this.push(this.buffer.slice(0,this.position)),this.buffer=Buffer.alloc(this.length),e()}}ie.ByteLengthParser=mt;var se={};Object.defineProperty(se,"__esModule",{value:!0});se.CCTalkParser=void 0;const _t=j;class Ct extends _t.Transform{constructor(e=50){super();w(this,"array");w(this,"cursor");w(this,"lastByteFetchTime");w(this,"maxDelayBetweenBytesMs");this.array=[],this.cursor=0,this.lastByteFetchTime=0,this.maxDelayBetweenBytesMs=e}_transform(e,i,o){if(this.maxDelayBetweenBytesMs>0){const a=Date.now();a-this.lastByteFetchTime>this.maxDelayBetweenBytesMs&&(this.array=[],this.cursor=0),this.lastByteFetchTime=a}for(this.cursor+=e.length,Array.from(e).map(a=>this.array.push(a));this.cursor>1&&this.cursor>=this.array[1]+5;){const a=this.array[1]+5,l=Buffer.from(this.array.slice(0,a));this.array=this.array.slice(l.length,this.array.length),this.cursor-=a,this.push(l)}o()}}se.CCTalkParser=Ct;var X={};Object.defineProperty(X,"__esModule",{value:!0});X.DelimiterParser=void 0;const vt=j;let Et=class extends vt.Transform{constructor({delimiter:e,includeDelimiter:i=!1,...o}){super(o);w(this,"includeDelimiter");w(this,"delimiter");w(this,"buffer");if(e===void 0)throw new TypeError('"delimiter" is not a bufferable object');if(e.length===0)throw new TypeError('"delimiter" has a 0 or undefined length');this.includeDelimiter=i,this.delimiter=Buffer.from(e),this.buffer=Buffer.alloc(0)}_transform(e,i,o){let a=Buffer.concat([this.buffer,e]),l;for(;(l=a.indexOf(this.delimiter))!==-1;)this.push(a.slice(0,l+(this.includeDelimiter?this.delimiter.length:0))),a=a.slice(l+this.delimiter.length);this.buffer=a,o()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}};X.DelimiterParser=Et;var oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.InterByteTimeoutParser=void 0;const Bt=j;class Ot extends Bt.Transform{constructor({maxBufferSize:e=65536,interval:i,...o}){super(o);w(this,"maxBufferSize");w(this,"currentPacket");w(this,"interval");w(this,"intervalID");if(!i)throw new TypeError('"interval" is required');if(typeof i!="number"||Number.isNaN(i))throw new TypeError('"interval" is not a number');if(i<1)throw new TypeError('"interval" is not greater than 0');if(typeof e!="number"||Number.isNaN(e))throw new TypeError('"maxBufferSize" is not a number');if(e<1)throw new TypeError('"maxBufferSize" is not greater than 0');this.maxBufferSize=e,this.currentPacket=[],this.interval=i}_transform(e,i,o){this.intervalID&&clearTimeout(this.intervalID);for(let a=0;a<e.length;a++)this.currentPacket.push(e[a]),this.currentPacket.length>=this.maxBufferSize&&this.emitPacket();this.intervalID=setTimeout(this.emitPacket.bind(this),this.interval),o()}emitPacket(){this.intervalID&&clearTimeout(this.intervalID),this.currentPacket.length>0&&this.push(Buffer.from(this.currentPacket)),this.currentPacket=[]}_flush(e){this.emitPacket(),e()}}oe.InterByteTimeoutParser=Ot;var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.PacketLengthParser=void 0;const Ft=j;class Pt extends Ft.Transform{constructor(e={}){super(e);w(this,"buffer");w(this,"start");w(this,"opts");const{delimiter:i=[170],delimiterBytes:o=1,packetOverhead:a=2,lengthBytes:l=1,lengthOffset:d=1,maxLen:f=255}=e;this.opts={delimiter:[].concat(i),delimiterBytes:o,packetOverhead:a,lengthBytes:l,lengthOffset:d,maxLen:f},this.buffer=Buffer.alloc(0),this.start=!1}_transform(e,i,o){for(let a=0;a<e.length;a++){const l=e[a];if(this.start===!0){if(this.buffer=Buffer.concat([this.buffer,Buffer.from([l])]),this.buffer.length>=this.opts.lengthOffset+this.opts.lengthBytes){const d=this.buffer.readUIntLE(this.opts.lengthOffset,this.opts.lengthBytes);(this.buffer.length==d+this.opts.packetOverhead||d>this.opts.maxLen)&&(this.push(this.buffer),this.buffer=Buffer.alloc(0),this.start=!1)}}else if(this.buffer=Buffer.concat([Buffer.from([l]),this.buffer]),this.buffer.length===this.opts.delimiterBytes){const d=this.buffer.readUIntLE(0,this.opts.delimiterBytes);this.opts.delimiter.includes(d)?(this.start=!0,this.buffer=Buffer.from([...this.buffer].reverse())):this.buffer=Buffer.from(this.buffer.subarray(1,this.buffer.length))}}o()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}ae.PacketLengthParser=Pt;var ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.ReadlineParser=void 0;const Tt=X;let Nt=class extends Tt.DelimiterParser{constructor(t){const e={delimiter:Buffer.from(`
`,"utf8"),encoding:"utf8",...t};typeof e.delimiter=="string"&&(e.delimiter=Buffer.from(e.delimiter,e.encoding)),super(e)}};ue.ReadlineParser=Nt;var ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.ReadyParser=void 0;const St=j;class Dt extends St.Transform{constructor({delimiter:e,...i}){if(e===void 0)throw new TypeError('"delimiter" is not a bufferable object');if(e.length===0)throw new TypeError('"delimiter" has a 0 or undefined length');super(i);w(this,"delimiter");w(this,"readOffset");w(this,"ready");this.delimiter=Buffer.from(e),this.readOffset=0,this.ready=!1}_transform(e,i,o){if(this.ready)return this.push(e),o();const a=this.delimiter;let l=0;for(;this.readOffset<a.length&&l<e.length;)a[this.readOffset]===e[l]?this.readOffset++:this.readOffset=0,l++;if(this.readOffset===a.length){this.ready=!0,this.emit("ready");const d=e.slice(l);d.length>0&&this.push(d)}o()}}ce.ReadyParser=Dt;var le={};Object.defineProperty(le,"__esModule",{value:!0});le.RegexParser=void 0;const xt=j;class Rt extends xt.Transform{constructor({regex:e,...i}){const o={encoding:"utf8",...i};if(e===void 0)throw new TypeError('"options.regex" must be a regular expression pattern or object');e instanceof RegExp||(e=new RegExp(e.toString()));super(o);w(this,"regex");w(this,"data");this.regex=e,this.data=""}_transform(e,i,o){const l=(this.data+e).split(this.regex);this.data=l.pop()||"",l.forEach(d=>{this.push(d)}),o()}_flush(e){this.push(this.data),this.data="",e()}}le.RegexParser=Rt;var Qe={},de={};Object.defineProperty(de,"__esModule",{value:!0});de.SlipDecoder=void 0;const jt=j;class At extends jt.Transform{constructor(e={}){super(e);w(this,"opts");w(this,"buffer");w(this,"escape");w(this,"start");const{START:i,ESC:o=219,END:a=192,ESC_START:l,ESC_END:d=220,ESC_ESC:f=221}=e;this.opts={START:i,ESC:o,END:a,ESC_START:l,ESC_END:d,ESC_ESC:f},this.buffer=Buffer.alloc(0),this.escape=!1,this.start=!1}_transform(e,i,o){for(let a=0;a<e.length;a++){let l=e[a];if(l===this.opts.START){this.start=!0;continue}else this.opts.START==null&&(this.start=!0);if(this.escape)l===this.opts.ESC_START&&this.opts.START?l=this.opts.START:l===this.opts.ESC_ESC?l=this.opts.ESC:l===this.opts.ESC_END?l=this.opts.END:(this.escape=!1,this.push(this.buffer),this.buffer=Buffer.alloc(0));else{if(l===this.opts.ESC){this.escape=!0;continue}if(l===this.opts.END){this.push(this.buffer),this.buffer=Buffer.alloc(0),this.escape=!1,this.start=!1;continue}}this.escape=!1,this.start&&(this.buffer=Buffer.concat([this.buffer,Buffer.from([l])]))}o()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}de.SlipDecoder=At;var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.SlipEncoder=void 0;const Mt=j;class It extends Mt.Transform{constructor(e={}){super(e);w(this,"opts");const{START:i,ESC:o=219,END:a=192,ESC_START:l,ESC_END:d=220,ESC_ESC:f=221,bluetoothQuirk:u=!1}=e;this.opts={START:i,ESC:o,END:a,ESC_START:l,ESC_END:d,ESC_ESC:f,bluetoothQuirk:u}}_transform(e,i,o){const a=e.length;if(this.opts.bluetoothQuirk&&a===0)return o();const l=Buffer.alloc(a*2+2);let d=0;this.opts.bluetoothQuirk==!0&&(l[d++]=this.opts.END),this.opts.START!==void 0&&(l[d++]=this.opts.START);for(let f=0;f<a;f++){let u=e[f];u===this.opts.START&&this.opts.ESC_START?(l[d++]=this.opts.ESC,u=this.opts.ESC_START):u===this.opts.END?(l[d++]=this.opts.ESC,u=this.opts.ESC_END):u===this.opts.ESC&&(l[d++]=this.opts.ESC,u=this.opts.ESC_ESC),l[d++]=u}l[d++]=this.opts.END,o(null,l.slice(0,d))}}fe.SlipEncoder=It;(function(r){var t=C&&C.__createBinding||(Object.create?function(i,o,a,l){l===void 0&&(l=a);var d=Object.getOwnPropertyDescriptor(o,a);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,l,d)}:function(i,o,a,l){l===void 0&&(l=a),i[l]=o[a]}),e=C&&C.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,i,a)};Object.defineProperty(r,"__esModule",{value:!0}),e(de,r),e(fe,r)})(Qe);var he={},Xe={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertHeaderBufferToObj=r.HEADER_LENGTH=void 0,r.HEADER_LENGTH=6;const t=i=>{let o=Number(i).toString(2);for(;o.length<8;)o=`0${o}`;return o},e=i=>{const o=Array.from(i.slice(0,r.HEADER_LENGTH)).reduce((h,g)=>`${h}${t(g)}`,""),l=o.slice(0,3)==="000"?1:"UNKNOWN_VERSION",d=Number(o[3]),f=Number(o[4]),u=parseInt(o.slice(5,16),2),n=parseInt(o.slice(16,18),2),s=parseInt(o.slice(18,32),2),c=parseInt(o.slice(-16),2)+1;return{versionNumber:l,identification:{apid:u,secondaryHeader:f,type:d},sequenceControl:{packetName:s,sequenceFlags:n},dataLength:c}};r.convertHeaderBufferToObj=e})(Xe);Object.defineProperty(he,"__esModule",{value:!0});he.SpacePacketParser=void 0;const $t=j,te=Xe;class Lt extends $t.Transform{constructor(e={}){super({...e,objectMode:!0});w(this,"timeCodeFieldLength");w(this,"ancillaryDataFieldLength");w(this,"dataBuffer");w(this,"headerBuffer");w(this,"dataLength");w(this,"expectingHeader");w(this,"dataSlice");w(this,"header");this.timeCodeFieldLength=e.timeCodeFieldLength||0,this.ancillaryDataFieldLength=e.ancillaryDataFieldLength||0,this.dataSlice=this.timeCodeFieldLength+this.ancillaryDataFieldLength,this.dataBuffer=Buffer.alloc(0),this.headerBuffer=Buffer.alloc(0),this.dataLength=0,this.expectingHeader=!0}pushCompletedPacket(){if(!this.header)throw new Error("Missing header");const e=Buffer.from(this.dataBuffer.slice(0,this.timeCodeFieldLength)),i=Buffer.from(this.dataBuffer.slice(this.timeCodeFieldLength,this.timeCodeFieldLength+this.ancillaryDataFieldLength)),o=Buffer.from(this.dataBuffer.slice(this.dataSlice,this.dataLength)),a={header:{...this.header},data:o.toString()};(e.length>0||i.length>0)&&(a.secondaryHeader={},e.length&&(a.secondaryHeader.timeCode=e.toString()),i.length&&(a.secondaryHeader.ancillaryData=i.toString())),this.push(a);const l=Buffer.from(this.dataBuffer.slice(this.dataLength));l.length>=te.HEADER_LENGTH?this.extractHeader(l):(this.headerBuffer=l,this.dataBuffer=Buffer.alloc(0),this.expectingHeader=!0,this.dataLength=0,this.header=void 0)}extractHeader(e){const i=Buffer.concat([this.headerBuffer,e]),o=i.slice(te.HEADER_LENGTH);i.length>=te.HEADER_LENGTH?(this.header=(0,te.convertHeaderBufferToObj)(i),this.dataLength=this.header.dataLength,this.headerBuffer=Buffer.alloc(0),this.expectingHeader=!1):this.headerBuffer=i,o.length>0&&(this.dataBuffer=Buffer.from(o),this.dataBuffer.length>=this.dataLength&&this.pushCompletedPacket())}_transform(e,i,o){this.expectingHeader?this.extractHeader(e):(this.dataBuffer=Buffer.concat([this.dataBuffer,e]),this.dataBuffer.length>=this.dataLength&&this.pushCompletedPacket()),o()}_flush(e){const i=Buffer.concat([this.headerBuffer,this.dataBuffer]),o=Array.from(i);this.push(o),e()}}he.SpacePacketParser=Lt;var pe={},V={},Fe={exports:{}},_e,qe;function je(){if(qe)return _e;qe=1;var r=1e3,t=r*60,e=t*60,i=e*24,o=i*7,a=i*365.25;_e=function(n,s){s=s||{};var c=typeof n;if(c==="string"&&n.length>0)return l(n);if(c==="number"&&isFinite(n))return s.long?f(n):d(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function l(n){if(n=String(n),!(n.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(s){var c=parseFloat(s[1]),h=(s[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*e;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function d(n){var s=Math.abs(n);return s>=i?Math.round(n/i)+"d":s>=e?Math.round(n/e)+"h":s>=t?Math.round(n/t)+"m":s>=r?Math.round(n/r)+"s":n+"ms"}function f(n){var s=Math.abs(n);return s>=i?u(n,s,i,"day"):s>=e?u(n,s,e,"hour"):s>=t?u(n,s,t,"minute"):s>=r?u(n,s,r,"second"):n+" ms"}function u(n,s,c,h){var g=s>=c*1.5;return Math.round(n/c)+" "+h+(g?"s":"")}return _e}function kt(r){e.debug=e,e.default=e,e.coerce=f,e.disable=l,e.enable=o,e.enabled=d,e.humanize=je(),e.destroy=u,Object.keys(r).forEach(n=>{e[n]=r[n]}),e.names=[],e.skips=[],e.formatters={};function t(n){let s=0;for(let c=0;c<n.length;c++)s=(s<<5)-s+n.charCodeAt(c),s|=0;return e.colors[Math.abs(s)%e.colors.length]}e.selectColor=t;function e(n){let s,c=null,h,g;function p(...y){if(!p.enabled)return;const v=p,P=Number(new Date),$=P-(s||P);v.diff=$,v.prev=s,v.curr=P,s=P,y[0]=e.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let T=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(D,U)=>{if(D==="%%")return"%";T++;const A=e.formatters[U];if(typeof A=="function"){const W=y[T];D=A.call(v,W),y.splice(T,1),T--}return D}),e.formatArgs.call(v,y),(v.log||e.log).apply(v,y)}return p.namespace=n,p.useColors=e.useColors(),p.color=e.selectColor(n),p.extend=i,p.destroy=e.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(h!==e.namespaces&&(h=e.namespaces,g=e.enabled(n)),g),set:y=>{c=y}}),typeof e.init=="function"&&e.init(p),p}function i(n,s){const c=e(this.namespace+(typeof s>"u"?":":s)+n);return c.log=this.log,c}function o(n){e.save(n),e.namespaces=n,e.names=[],e.skips=[];const s=(typeof n=="string"?n:"").trim().replace(" ",",").split(",").filter(Boolean);for(const c of s)c[0]==="-"?e.skips.push(c.slice(1)):e.names.push(c)}function a(n,s){let c=0,h=0,g=-1,p=0;for(;c<n.length;)if(h<s.length&&(s[h]===n[c]||s[h]==="*"))s[h]==="*"?(g=h,p=c,h++):(c++,h++);else if(g!==-1)h=g+1,p++,c=p;else return!1;for(;h<s.length&&s[h]==="*";)h++;return h===s.length}function l(){const n=[...e.names,...e.skips.map(s=>"-"+s)].join(",");return e.enable(""),n}function d(n){for(const s of e.skips)if(a(n,s))return!1;for(const s of e.names)if(a(n,s))return!0;return!1}function f(n){return n instanceof Error?n.stack||n.message:n}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}var Ut=kt;(function(r,t){var e={};t.formatArgs=o,t.save=a,t.load=l,t.useColors=i,t.storage=d(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;u.splice(1,0,n,"color: inherit");let s=0,c=0;u[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(s++,h==="%c"&&(c=s))}),u.splice(c,0,n)}t.log=console.debug||console.log||(()=>{});function a(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function l(){let u;try{u=t.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=e.DEBUG),u}function d(){try{return localStorage}catch{}}r.exports=Ut(t);const{formatters:f}=r.exports;f.j=function(u){try{return JSON.stringify(u)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}})(Fe,Fe.exports);var Wt=Fe.exports,zt=C&&C.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(V,"__esModule",{value:!0});V.SerialPortStream=V.DisconnectedError=void 0;const Vt=j,qt=zt(Wt),b=(0,qt.default)("serialport/stream");class Ye extends Error{constructor(e){super(e);w(this,"disconnected");this.disconnected=!0}}V.DisconnectedError=Ye;const Ht={brk:!1,cts:!1,dtr:!0,rts:!0};function He(r){const t=Buffer.allocUnsafe(r);return t.used=0,t}class Gt extends Vt.Duplex{constructor(e,i){const o={autoOpen:!0,endOnClose:!1,highWaterMark:65536,...e};super({highWaterMark:o.highWaterMark});w(this,"port");w(this,"_pool");w(this,"_kMinPoolSpace");w(this,"opening");w(this,"closing");w(this,"settings");if(!o.binding)throw new TypeError('"Bindings" is invalid pass it as `options.binding`');if(!o.path)throw new TypeError(`"path" is not defined: ${o.path}`);if(typeof o.baudRate!="number")throw new TypeError(`"baudRate" must be a number: ${o.baudRate}`);this.settings=o,this.opening=!1,this.closing=!1,this._pool=He(this.settings.highWaterMark),this._kMinPoolSpace=128,this.settings.autoOpen&&this.open(i)}get path(){return this.settings.path}get baudRate(){return this.settings.baudRate}get isOpen(){var e;return(((e=this.port)==null?void 0:e.isOpen)??!1)&&!this.closing}_error(e,i){i?i.call(this,e):this.emit("error",e)}_asyncError(e,i){process.nextTick(()=>this._error(e,i))}open(e){if(this.isOpen)return this._asyncError(new Error("Port is already open"),e);if(this.opening)return this._asyncError(new Error("Port is opening"),e);const{highWaterMark:i,binding:o,autoOpen:a,endOnClose:l,...d}=this.settings;this.opening=!0,b("opening",`path: ${this.path}`),this.settings.binding.open(d).then(f=>{b("opened",`path: ${this.path}`),this.port=f,this.opening=!1,this.emit("open"),e&&e.call(this,null)},f=>{this.opening=!1,b("Binding #open had an error",f),this._error(f,e)})}update(e,i){if(!this.isOpen||!this.port)return b("update attempted, but port is not open"),this._asyncError(new Error("Port is not open"),i);b("update",`baudRate: ${e.baudRate}`),this.port.update(e).then(()=>{b("binding.update","finished"),this.settings.baudRate=e.baudRate,i&&i.call(this,null)},o=>(b("binding.update","error",o),this._error(o,i)))}write(e,i,o){return Array.isArray(e)&&(e=Buffer.from(e)),typeof i=="function"?super.write(e,i):super.write(e,i,o)}_write(e,i,o){if(!this.isOpen||!this.port){this.once("open",()=>{this._write(e,i,o)});return}b("_write",`${e.length} bytes of data`),this.port.write(e).then(()=>{b("binding.write","write finished"),o(null)},a=>{b("binding.write","error",a),a.canceled||this._disconnected(a),o(a)})}_writev(e,i){b("_writev",`${e.length} chunks of data`);const o=e.map(a=>a.chunk);this._write(Buffer.concat(o),"binary",i)}_read(e){if(!this.isOpen||!this.port){b("_read","queueing _read for after open"),this.once("open",()=>{this._read(e)});return}(!this._pool||this._pool.length-this._pool.used<this._kMinPoolSpace)&&(b("_read","discarding the read buffer pool because it is below kMinPoolSpace"),this._pool=He(this.settings.highWaterMark));const i=this._pool,o=Math.min(i.length-i.used,e),a=i.used;b("_read","reading",{start:a,toRead:o}),this.port.read(i,a,o).then(({bytesRead:l})=>{if(b("binding.read","finished",{bytesRead:l}),l===0){b("binding.read","Zero bytes read closing readable stream"),this.push(null);return}i.used+=l,this.push(i.slice(a,a+l))},l=>{b("binding.read","error",l),l.canceled||this._disconnected(l),this._read(e)})}_disconnected(e){if(!this.isOpen){b("disconnected aborted because already closed",e);return}b("disconnected",e),this.close(void 0,new Ye(e.message))}close(e,i=null){if(!this.isOpen||!this.port)return b("close attempted, but port is not open"),this._asyncError(new Error("Port is not open"),e);this.closing=!0,b("#close"),this.port.close().then(()=>{this.closing=!1,b("binding.close","finished"),this.emit("close",i),this.settings.endOnClose&&this.emit("end"),e&&e.call(this,i)},o=>(this.closing=!1,b("binding.close","had an error",o),this._error(o,e)))}set(e,i){if(!this.isOpen||!this.port)return b("set attempted, but port is not open"),this._asyncError(new Error("Port is not open"),i);const o={...Ht,...e};b("#set",o),this.port.set(o).then(()=>{b("binding.set","finished"),i&&i.call(this,null)},a=>(b("binding.set","had an error",a),this._error(a,i)))}get(e){if(!this.isOpen||!this.port)return b("get attempted, but port is not open"),this._asyncError(new Error("Port is not open"),e);b("#get"),this.port.get().then(i=>{b("binding.get","finished"),e.call(this,null,i)},i=>(b("binding.get","had an error",i),this._error(i,e)))}flush(e){if(!this.isOpen||!this.port)return b("flush attempted, but port is not open"),this._asyncError(new Error("Port is not open"),e);b("#flush"),this.port.flush().then(()=>{b("binding.flush","finished"),e&&e.call(this,null)},i=>(b("binding.flush","had an error",i),this._error(i,e)))}drain(e){if(b("drain"),!this.isOpen||!this.port){b("drain queuing on port open"),this.once("open",()=>{this.drain(e)});return}this.port.drain().then(()=>{b("binding.drain","finished"),e&&e.call(this,null)},i=>(b("binding.drain","had an error",i),this._error(i,e)))}}V.SerialPortStream=Gt;var Y={},Pe={exports:{}};function Jt(r){e.debug=e,e.default=e,e.coerce=f,e.disable=l,e.enable=o,e.enabled=d,e.humanize=je(),e.destroy=u,Object.keys(r).forEach(n=>{e[n]=r[n]}),e.names=[],e.skips=[],e.formatters={};function t(n){let s=0;for(let c=0;c<n.length;c++)s=(s<<5)-s+n.charCodeAt(c),s|=0;return e.colors[Math.abs(s)%e.colors.length]}e.selectColor=t;function e(n){let s,c=null,h,g;function p(...y){if(!p.enabled)return;const v=p,P=Number(new Date),$=P-(s||P);v.diff=$,v.prev=s,v.curr=P,s=P,y[0]=e.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let T=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(D,U)=>{if(D==="%%")return"%";T++;const A=e.formatters[U];if(typeof A=="function"){const W=y[T];D=A.call(v,W),y.splice(T,1),T--}return D}),e.formatArgs.call(v,y),(v.log||e.log).apply(v,y)}return p.namespace=n,p.useColors=e.useColors(),p.color=e.selectColor(n),p.extend=i,p.destroy=e.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(h!==e.namespaces&&(h=e.namespaces,g=e.enabled(n)),g),set:y=>{c=y}}),typeof e.init=="function"&&e.init(p),p}function i(n,s){const c=e(this.namespace+(typeof s>"u"?":":s)+n);return c.log=this.log,c}function o(n){e.save(n),e.namespaces=n,e.names=[],e.skips=[];const s=(typeof n=="string"?n:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const c of s)c[0]==="-"?e.skips.push(c.slice(1)):e.names.push(c)}function a(n,s){let c=0,h=0,g=-1,p=0;for(;c<n.length;)if(h<s.length&&(s[h]===n[c]||s[h]==="*"))s[h]==="*"?(g=h,p=c,h++):(c++,h++);else if(g!==-1)h=g+1,p++,c=p;else return!1;for(;h<s.length&&s[h]==="*";)h++;return h===s.length}function l(){const n=[...e.names,...e.skips.map(s=>"-"+s)].join(",");return e.enable(""),n}function d(n){for(const s of e.skips)if(a(n,s))return!1;for(const s of e.names)if(a(n,s))return!0;return!1}function f(n){return n instanceof Error?n.stack||n.message:n}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}var Zt=Jt;(function(r,t){var e={};t.formatArgs=o,t.save=a,t.load=l,t.useColors=i,t.storage=d(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;u.splice(1,0,n,"color: inherit");let s=0,c=0;u[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(s++,h==="%c"&&(c=s))}),u.splice(c,0,n)}t.log=console.debug||console.log||(()=>{});function a(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function l(){let u;try{u=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=e.DEBUG),u}function d(){try{return localStorage}catch{}}r.exports=Zt(t);const{formatters:f}=r.exports;f.j=function(u){try{return JSON.stringify(u)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}})(Pe,Pe.exports);var Kt=Pe.exports;Object.defineProperty(Y,"__esModule",{value:!0});var Qt=Kt;function Xt(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var Yt=Xt(Qt);const F=Yt.default("serialport/binding-mock");let re={},ne=0;function I(){return new Promise(r=>process.nextTick(()=>r()))}class Te extends Error{constructor(t){super(t),this.canceled=!0}}const er={reset(){re={},ne=0},createPort(r,t={}){ne++;const e=Object.assign({echo:!1,record:!1,manufacturer:"The J5 Robotics Company",vendorId:void 0,productId:void 0,maxReadSize:1024},t);re[r]={data:Buffer.alloc(0),echo:e.echo,record:e.record,readyData:e.readyData,maxReadSize:e.maxReadSize,info:{path:r,manufacturer:e.manufacturer,serialNumber:`${ne}`,pnpId:void 0,locationId:void 0,vendorId:e.vendorId,productId:e.productId}},F(ne,"created port",JSON.stringify({path:r,opt:t}))},async list(){return F(null,"list"),Object.values(re).map(r=>r.info)},async open(r){var t;if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError('"options" is not an object');if(!r.path)throw new TypeError('"path" is not a valid port');if(!r.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');const e=Object.assign({dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,xon:!1,xoff:!1,xany:!1,hupcl:!0},r),{path:i}=e;F(null,`open: opening path ${i}`);const o=re[i];if(await I(),!o)throw new Error(`Port does not exist - please call MockBinding.createPort('${i}') first`);const a=o.info.serialNumber;if(!((t=o.openOpt)===null||t===void 0)&&t.lock)throw F(a,"open: Port is locked cannot open"),new Error("Port is locked cannot open");return F(a,`open: opened path ${i}`),o.openOpt=Object.assign({},e),new et(o,e)}};class et{constructor(t,e){if(this.port=t,this.openOptions=e,this.pendingRead=null,this.isOpen=!0,this.lastWrite=null,this.recording=Buffer.alloc(0),this.writeOperation=null,this.serialNumber=t.info.serialNumber,t.readyData){const i=t.readyData;process.nextTick(()=>{this.isOpen&&(F(this.serialNumber,"emitting ready data"),this.emitData(i))})}}emitData(t){if(!this.isOpen||!this.port)throw new Error("Port must be open to pretend to receive data");const e=Buffer.isBuffer(t)?t:Buffer.from(t);F(this.serialNumber,"emitting data - pending read:",!!this.pendingRead),this.port.data=Buffer.concat([this.port.data,e]),this.pendingRead&&(process.nextTick(this.pendingRead),this.pendingRead=null)}async close(){if(F(this.serialNumber,"close"),!this.isOpen)throw new Error("Port is not open");const t=this.port;if(!t)throw new Error("already closed");t.openOpt=void 0,t.data=Buffer.alloc(0),F(this.serialNumber,"port is closed"),this.serialNumber=void 0,this.isOpen=!1,this.pendingRead&&this.pendingRead(new Te("port is closed"))}async read(t,e,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" is not a Buffer');if(typeof e!="number"||isNaN(e))throw new TypeError(`"offset" is not an integer got "${isNaN(e)?"NaN":typeof e}"`);if(typeof i!="number"||isNaN(i))throw new TypeError(`"length" is not an integer got "${isNaN(i)?"NaN":typeof i}"`);if(t.length<e+i)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");if(F(this.serialNumber,"read",i,"bytes"),await I(),!this.isOpen||!this.port)throw new Te("Read canceled");if(this.port.data.length<=0)return new Promise((d,f)=>{this.pendingRead=u=>{if(u)return f(u);this.read(t,e,i).then(d,f)}});const o=this.port.maxReadSize>i?i:this.port.maxReadSize,l=this.port.data.slice(0,o).copy(t,e);return this.port.data=this.port.data.slice(o),F(this.serialNumber,"read",l,"bytes"),{bytesRead:l,buffer:t}}async write(t){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" is not a Buffer');if(!this.isOpen||!this.port)throw F("write","error port is not open"),new Error("Port is not open");if(F(this.serialNumber,"write",t.length,"bytes"),this.writeOperation)throw new Error("Overlapping writes are not supported and should be queued by the serialport object");return this.writeOperation=(async()=>{if(await I(),!this.isOpen||!this.port)throw new Error("Write canceled");const e=this.lastWrite=Buffer.from(t);this.port.record&&(this.recording=Buffer.concat([this.recording,e])),this.port.echo&&process.nextTick(()=>{this.isOpen&&this.emitData(e)}),this.writeOperation=null,F(this.serialNumber,"writing finished")})(),this.writeOperation}async update(t){if(typeof t!="object")throw TypeError('"options" is not an object');if(typeof t.baudRate!="number")throw new TypeError('"options.baudRate" is not a number');if(F(this.serialNumber,"update"),!this.isOpen||!this.port)throw new Error("Port is not open");await I(),this.port.openOpt&&(this.port.openOpt.baudRate=t.baudRate)}async set(t){if(typeof t!="object")throw new TypeError('"options" is not an object');if(F(this.serialNumber,"set"),!this.isOpen)throw new Error("Port is not open");await I()}async get(){if(F(this.serialNumber,"get"),!this.isOpen)throw new Error("Port is not open");return await I(),{cts:!0,dsr:!1,dcd:!1}}async getBaudRate(){var t;if(F(this.serialNumber,"getBaudRate"),!this.isOpen||!this.port)throw new Error("Port is not open");if(await I(),!(!((t=this.port.openOpt)===null||t===void 0)&&t.baudRate))throw new Error("Internal Error");return{baudRate:this.port.openOpt.baudRate}}async flush(){if(F(this.serialNumber,"flush"),!this.isOpen||!this.port)throw new Error("Port is not open");await I(),this.port.data=Buffer.alloc(0)}async drain(){if(F(this.serialNumber,"drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await I()}}Y.CanceledError=Te;Y.MockBinding=er;Y.MockPortBinding=et;Object.defineProperty(pe,"__esModule",{value:!0});pe.SerialPortMock=void 0;const tr=V,Ce=Y;class Ne extends tr.SerialPortStream{constructor(t,e){const i={binding:Ce.MockBinding,...t};super(i,e)}}w(Ne,"list",Ce.MockBinding.list),w(Ne,"binding",Ce.MockBinding);pe.SerialPortMock=Ne;var ge={},ve={},Se={exports:{}};function rr(r){e.debug=e,e.default=e,e.coerce=f,e.disable=l,e.enable=o,e.enabled=d,e.humanize=je(),e.destroy=u,Object.keys(r).forEach(n=>{e[n]=r[n]}),e.names=[],e.skips=[],e.formatters={};function t(n){let s=0;for(let c=0;c<n.length;c++)s=(s<<5)-s+n.charCodeAt(c),s|=0;return e.colors[Math.abs(s)%e.colors.length]}e.selectColor=t;function e(n){let s,c=null,h,g;function p(...y){if(!p.enabled)return;const v=p,P=Number(new Date),$=P-(s||P);v.diff=$,v.prev=s,v.curr=P,s=P,y[0]=e.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let T=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(D,U)=>{if(D==="%%")return"%";T++;const A=e.formatters[U];if(typeof A=="function"){const W=y[T];D=A.call(v,W),y.splice(T,1),T--}return D}),e.formatArgs.call(v,y),(v.log||e.log).apply(v,y)}return p.namespace=n,p.useColors=e.useColors(),p.color=e.selectColor(n),p.extend=i,p.destroy=e.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(h!==e.namespaces&&(h=e.namespaces,g=e.enabled(n)),g),set:y=>{c=y}}),typeof e.init=="function"&&e.init(p),p}function i(n,s){const c=e(this.namespace+(typeof s>"u"?":":s)+n);return c.log=this.log,c}function o(n){e.save(n),e.namespaces=n,e.names=[],e.skips=[];const s=(typeof n=="string"?n:"").trim().replace(" ",",").split(",").filter(Boolean);for(const c of s)c[0]==="-"?e.skips.push(c.slice(1)):e.names.push(c)}function a(n,s){let c=0,h=0,g=-1,p=0;for(;c<n.length;)if(h<s.length&&(s[h]===n[c]||s[h]==="*"))s[h]==="*"?(g=h,p=c,h++):(c++,h++);else if(g!==-1)h=g+1,p++,c=p;else return!1;for(;h<s.length&&s[h]==="*";)h++;return h===s.length}function l(){const n=[...e.names,...e.skips.map(s=>"-"+s)].join(",");return e.enable(""),n}function d(n){for(const s of e.skips)if(a(n,s))return!1;for(const s of e.names)if(a(n,s))return!0;return!1}function f(n){return n instanceof Error?n.stack||n.message:n}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}var nr=rr;(function(r,t){var e={};t.formatArgs=o,t.save=a,t.load=l,t.useColors=i,t.storage=d(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;u.splice(1,0,n,"color: inherit");let s=0,c=0;u[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(s++,h==="%c"&&(c=s))}),u.splice(c,0,n)}t.log=console.debug||console.log||(()=>{});function a(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function l(){let u;try{u=t.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=e.DEBUG),u}function d(){try{return localStorage}catch{}}r.exports=nr(t);const{formatters:f}=r.exports;f.j=function(u){try{return JSON.stringify(u)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}})(Se,Se.exports);var J=Se.exports,q={},B={};const ir=new Proxy({},{get(r,t){throw new Error(`Module "util" has been externalized for browser compatibility. Cannot access "util.${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),sr=Object.freeze(Object.defineProperty({__proto__:null,default:ir},Symbol.toStringTag,{value:"Module"})),Ae=G(sr);var ee={};const or=new Proxy({},{get(r,t){throw new Error(`Module "path" has been externalized for browser compatibility. Cannot access "path.${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),ar=Object.freeze(Object.defineProperty({__proto__:null,default:or},Symbol.toStringTag,{value:"Module"})),tt=G(ar);function rt(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var De={exports:{}};const ur=new Proxy({},{get(r,t){throw new Error(`Module "fs" has been externalized for browser compatibility. Cannot access "fs.${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),cr=Object.freeze(Object.defineProperty({__proto__:null,default:ur},Symbol.toStringTag,{value:"Module"})),Me=G(cr),lr=new Proxy({},{get(r,t){throw new Error(`Module "os" has been externalized for browser compatibility. Cannot access "os.${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),dr=Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"})),fr=G(dr);var Ee,Ge;function hr(){if(Ge)return Ee;Ge=1;var r={},t=Me,e=tt,i=fr,o=typeof __webpack_require__=="function"?__non_webpack_require__:rt,a=process.config&&process.config.variables||{},l=!!r.PREBUILDS_ONLY,d=process.versions.modules,f=ot()?"electron":W()?"node-webkit":"node",u=r.npm_config_arch||i.arch(),n=r.npm_config_platform||i.platform(),s=r.LIBC||(at(n)?"musl":"glibc"),c=r.ARM_VERSION||(u==="arm64"?"8":a.arm_version)||"",h=(process.versions.uv||"").split(".")[0];Ee=g;function g(m){return o(g.resolve(m))}g.resolve=g.path=function(m){m=e.resolve(m||".");try{var E=o(e.join(m,"package.json")).name.toUpperCase().replace(/-/g,"_");r[E+"_PREBUILD"]&&(m=r[E+"_PREBUILD"])}catch{}if(!l){var _=y(e.join(m,"build/Release"),v);if(_)return _;var S=y(e.join(m,"build/Debug"),v);if(S)return S}var Z=Ue(m);if(Z)return Z;var N=Ue(e.dirname(process.execPath));if(N)return N;var ut=["platform="+n,"arch="+u,"runtime="+f,"abi="+d,"uv="+h,c?"armv="+c:"","libc="+s,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+ut+`
    loaded from: `+m+`
`);function Ue(me){var ct=p(e.join(me,"prebuilds")).map(P),We=ct.filter($(n,u)).sort(T)[0];if(We){var ze=e.join(me,"prebuilds",We.name),lt=p(ze).map(Q),dt=lt.filter(D(f,d)),Ve=dt.sort(A(f))[0];if(Ve)return e.join(ze,Ve.file)}}};function p(m){try{return t.readdirSync(m)}catch{return[]}}function y(m,E){var _=p(m).filter(E);return _[0]&&e.join(m,_[0])}function v(m){return/\.node$/.test(m)}function P(m){var E=m.split("-");if(E.length===2){var _=E[0],S=E[1].split("+");if(_&&S.length&&S.every(Boolean))return{name:m,platform:_,architectures:S}}}function $(m,E){return function(_){return _==null||_.platform!==m?!1:_.architectures.includes(E)}}function T(m,E){return m.architectures.length-E.architectures.length}function Q(m){var E=m.split("."),_=E.pop(),S={file:m,specificity:0};if(_==="node"){for(var Z=0;Z<E.length;Z++){var N=E[Z];if(N==="node"||N==="electron"||N==="node-webkit")S.runtime=N;else if(N==="napi")S.napi=!0;else if(N.slice(0,3)==="abi")S.abi=N.slice(3);else if(N.slice(0,2)==="uv")S.uv=N.slice(2);else if(N.slice(0,4)==="armv")S.armv=N.slice(4);else if(N==="glibc"||N==="musl")S.libc=N;else continue;S.specificity++}return S}}function D(m,E){return function(_){return!(_==null||_.runtime&&_.runtime!==m&&!U(_)||_.abi&&_.abi!==E&&!_.napi||_.uv&&_.uv!==h||_.armv&&_.armv!==c||_.libc&&_.libc!==s)}}function U(m){return m.runtime==="node"&&m.napi}function A(m){return function(E,_){return E.runtime!==_.runtime?E.runtime===m?-1:1:E.abi!==_.abi?E.abi?-1:1:E.specificity!==_.specificity?E.specificity>_.specificity?-1:1:0}}function W(){return!!(process.versions&&process.versions.nw)}function ot(){return process.versions&&process.versions.electron||r.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function at(m){return m==="linux"&&t.existsSync("/etc/alpine-release")}return g.parseTags=Q,g.matchTags=D,g.compareTags=A,g.parseTuple=P,g.matchTuple=$,g.compareTuples=T,Ee}const Be=typeof __webpack_require__=="function"?__non_webpack_require__:rt;typeof Be.addon=="function"?De.exports=Be.addon.bind(Be):De.exports=hr();var pr=De.exports,gr=C&&C.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ee,"__esModule",{value:!0});ee.binding=void 0;const wr=tt,yr=gr(pr);ee.binding=(0,yr.default)((0,wr.join)(__dirname,"../"));Object.defineProperty(B,"__esModule",{value:!0});B.asyncWrite=B.asyncRead=B.asyncUpdate=B.asyncSet=B.asyncOpen=B.asyncList=B.asyncGetBaudRate=B.asyncGet=B.asyncFlush=B.asyncDrain=B.asyncClose=void 0;const M=Ae,O=ee;B.asyncClose=O.binding.close?(0,M.promisify)(O.binding.close):async()=>{throw new Error('"binding.close" Method not implemented')};B.asyncDrain=O.binding.drain?(0,M.promisify)(O.binding.drain):async()=>{throw new Error('"binding.drain" Method not implemented')};B.asyncFlush=O.binding.flush?(0,M.promisify)(O.binding.flush):async()=>{throw new Error('"binding.flush" Method not implemented')};B.asyncGet=O.binding.get?(0,M.promisify)(O.binding.get):async()=>{throw new Error('"binding.get" Method not implemented')};B.asyncGetBaudRate=O.binding.getBaudRate?(0,M.promisify)(O.binding.getBaudRate):async()=>{throw new Error('"binding.getBaudRate" Method not implemented')};B.asyncList=O.binding.list?(0,M.promisify)(O.binding.list):async()=>{throw new Error('"binding.list" Method not implemented')};B.asyncOpen=O.binding.open?(0,M.promisify)(O.binding.open):async()=>{throw new Error('"binding.open" Method not implemented')};B.asyncSet=O.binding.set?(0,M.promisify)(O.binding.set):async()=>{throw new Error('"binding.set" Method not implemented')};B.asyncUpdate=O.binding.update?(0,M.promisify)(O.binding.update):async()=>{throw new Error('"binding.update" Method not implemented')};B.asyncRead=O.binding.read?(0,M.promisify)(O.binding.read):async()=>{throw new Error('"binding.read" Method not implemented')};B.asyncWrite=O.binding.write?(0,M.promisify)(O.binding.write):async()=>{throw new Error('"binding.write" Method not implemented')};var Ie={};const br=new Proxy({},{get(r,t){throw new Error(`Module "events" has been externalized for browser compatibility. Cannot access "events.${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),mr=Object.freeze(Object.defineProperty({__proto__:null,default:br},Symbol.toStringTag,{value:"Module"})),_r=G(mr);var K={};Object.defineProperty(K,"__esModule",{value:!0});K.BindingsError=void 0;class Cr extends Error{constructor(t,{canceled:e=!1}={}){super(t),this.canceled=e}}K.BindingsError=Cr;(function(r){var t=C&&C.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(r,"__esModule",{value:!0}),r.Poller=r.EVENTS=void 0;const e=t(J),i=_r,o=K,a=ee,{Poller:l}=a.binding,d=(0,e.default)("serialport/bindings-cpp/poller");r.EVENTS={UV_READABLE:1,UV_WRITABLE:2,UV_DISCONNECT:4};function f(n,s){if(n){d("error",n),this.emit("readable",n),this.emit("writable",n),this.emit("disconnect",n);return}s&r.EVENTS.UV_READABLE&&(d('received "readable"'),this.emit("readable",null)),s&r.EVENTS.UV_WRITABLE&&(d('received "writable"'),this.emit("writable",null)),s&r.EVENTS.UV_DISCONNECT&&(d('received "disconnect"'),this.emit("disconnect",null))}class u extends i.EventEmitter{constructor(s,c=l){d("Creating poller"),super(),this.poller=new c(s,f.bind(this))}once(s,c){switch(s){case"readable":this.poll(r.EVENTS.UV_READABLE);break;case"writable":this.poll(r.EVENTS.UV_WRITABLE);break;case"disconnect":this.poll(r.EVENTS.UV_DISCONNECT);break}return super.once(s,c)}poll(s=0){s&r.EVENTS.UV_READABLE&&d('Polling for "readable"'),s&r.EVENTS.UV_WRITABLE&&d('Polling for "writable"'),s&r.EVENTS.UV_DISCONNECT&&d('Polling for "disconnect"'),this.poller.poll(s)}stop(){d("Stopping poller"),this.poller.stop(),this.emitCanceled()}destroy(){d("Destroying poller"),this.poller.destroy(),this.emitCanceled()}emitCanceled(){const s=new o.BindingsError("Canceled",{canceled:!0});this.emit("readable",s),this.emit("writable",s),this.emit("disconnect",s)}}r.Poller=u})(Ie);var $e={};(function(r){var t=C&&C.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(r,"__esModule",{value:!0}),r.unixRead=void 0;const e=Ae,i=Me,o=K,l=(0,t(J).default)("serialport/bindings-cpp/unixRead"),d=(0,e.promisify)(i.read),f=n=>new Promise((s,c)=>{if(!n.poller)throw new Error("No poller on bindings");n.poller.once("readable",h=>h?c(h):s())}),u=async({binding:n,buffer:s,offset:c,length:h,fsReadAsync:g=d})=>{if(l("Starting read"),!n.isOpen||!n.fd)throw new o.BindingsError("Port is not open",{canceled:!0});try{const{bytesRead:p}=await g(n.fd,s,c,h,null);return p===0?(0,r.unixRead)({binding:n,buffer:s,offset:c,length:h,fsReadAsync:g}):(l("Finished read",p,"bytes"),{bytesRead:p,buffer:s})}catch(p){if(l("read error",p),p.code==="EAGAIN"||p.code==="EWOULDBLOCK"||p.code==="EINTR"){if(!n.isOpen)throw new o.BindingsError("Port is not open",{canceled:!0});return l("waiting for readable because of code:",p.code),await f(n),(0,r.unixRead)({binding:n,buffer:s,offset:c,length:h,fsReadAsync:g})}throw(p.code==="EBADF"||p.code==="ENXIO"||p.code==="UNKNOWN"||p.errno===-1)&&(p.disconnect=!0,l("disconnecting",p)),p}};r.unixRead=u})($e);var Le={};(function(r){var t=C&&C.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.unixWrite=void 0;const e=Me,i=t(J),o=Ae,a=(0,i.default)("serialport/bindings-cpp/unixWrite"),l=(0,o.promisify)(e.write),d=u=>new Promise((n,s)=>{u.poller.once("writable",c=>c?s(c):n())}),f=async({binding:u,buffer:n,offset:s=0,fsWriteAsync:c=l})=>{const h=n.length-s;if(a("Starting write",n.length,"bytes offset",s,"bytesToWrite",h),!u.isOpen||!u.fd)throw new Error("Port is not open");try{const{bytesWritten:g}=await c(u.fd,n,s,h);if(a("write returned: wrote",g,"bytes"),g+s<n.length){if(!u.isOpen)throw new Error("Port is not open");return(0,r.unixWrite)({binding:u,buffer:n,offset:g+s,fsWriteAsync:c})}a("Finished writing",g+s,"bytes")}catch(g){if(a("write errored",g),g.code==="EAGAIN"||g.code==="EWOULDBLOCK"||g.code==="EINTR"){if(!u.isOpen)throw new Error("Port is not open");return a("waiting for writable because of code:",g.code),await d(u),(0,r.unixWrite)({binding:u,buffer:n,offset:s,fsWriteAsync:c})}throw(g.code==="EBADF"||g.code==="ENXIO"||g.code==="UNKNOWN"||g.errno===-1)&&(g.disconnect=!0,a("disconnecting",g)),a("error",g),g}};r.unixWrite=f})(Le);var vr=C&&C.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(q,"__esModule",{value:!0});q.DarwinPortBinding=q.DarwinBinding=void 0;const Er=vr(J),k=B,Br=Ie,Or=$e,Fr=Le,x=(0,Er.default)("serialport/bindings-cpp");q.DarwinBinding={list(){return x("list"),(0,k.asyncList)()},async open(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError('"options" is not an object');if(!r.path)throw new TypeError('"path" is not a valid port');if(!r.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');x("open");const t=Object.assign({vmin:1,vtime:0,dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,xon:!1,xoff:!1,xany:!1,hupcl:!0},r),e=await(0,k.asyncOpen)(t.path,t);return new nt(e,t)}};class nt{constructor(t,e){this.fd=t,this.openOptions=e,this.poller=new Br.Poller(t),this.writeOperation=null}get isOpen(){return this.fd!==null}async close(){if(x("close"),!this.isOpen)throw new Error("Port is not open");const t=this.fd;this.poller.stop(),this.poller.destroy(),this.fd=null,await(0,k.asyncClose)(t)}async read(t,e,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" is not a Buffer');if(typeof e!="number"||isNaN(e))throw new TypeError(`"offset" is not an integer got "${isNaN(e)?"NaN":typeof e}"`);if(typeof i!="number"||isNaN(i))throw new TypeError(`"length" is not an integer got "${isNaN(i)?"NaN":typeof i}"`);if(x("read"),t.length<e+i)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");return(0,Or.unixRead)({binding:this,buffer:t,offset:e,length:i})}async write(t){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" is not a Buffer');if(x("write",t.length,"bytes"),!this.isOpen)throw x("write","error port is not open"),new Error("Port is not open");return this.writeOperation=(async()=>{t.length!==0&&(await(0,Fr.unixWrite)({binding:this,buffer:t}),this.writeOperation=null)})(),this.writeOperation}async update(t){if(!t||typeof t!="object"||Array.isArray(t))throw TypeError('"options" is not an object');if(typeof t.baudRate!="number")throw new TypeError('"options.baudRate" is not a number');if(x("update"),!this.isOpen)throw new Error("Port is not open");await(0,k.asyncUpdate)(this.fd,t)}async set(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError('"options" is not an object');if(x("set",t),!this.isOpen)throw new Error("Port is not open");await(0,k.asyncSet)(this.fd,t)}async get(){if(x("get"),!this.isOpen)throw new Error("Port is not open");return(0,k.asyncGet)(this.fd)}async getBaudRate(){throw x("getBaudRate"),this.isOpen?new Error("getBaudRate is not implemented on darwin"):new Error("Port is not open")}async flush(){if(x("flush"),!this.isOpen)throw new Error("Port is not open");await(0,k.asyncFlush)(this.fd)}async drain(){if(x("drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await(0,k.asyncDrain)(this.fd)}}q.DarwinPortBinding=nt;var H={},ke={};const Pr=new Proxy({},{get(r,t){throw new Error(`Module "child_process" has been externalized for browser compatibility. Cannot access "child_process.${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),Tr=Object.freeze(Object.defineProperty({__proto__:null,default:Pr},Symbol.toStringTag,{value:"Module"})),Nr=G(Tr);var we={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.DelimiterParser=void 0;const Sr=j;class Dr extends Sr.Transform{constructor({delimiter:e,includeDelimiter:i=!1,...o}){super(o);w(this,"includeDelimiter");w(this,"delimiter");w(this,"buffer");if(e===void 0)throw new TypeError('"delimiter" is not a bufferable object');if(e.length===0)throw new TypeError('"delimiter" has a 0 or undefined length');this.includeDelimiter=i,this.delimiter=Buffer.from(e),this.buffer=Buffer.alloc(0)}_transform(e,i,o){let a=Buffer.concat([this.buffer,e]),l;for(;(l=a.indexOf(this.delimiter))!==-1;)this.push(a.slice(0,l+(this.includeDelimiter?this.delimiter.length:0))),a=a.slice(l+this.delimiter.length);this.buffer=a,o()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}ye.DelimiterParser=Dr;Object.defineProperty(we,"__esModule",{value:!0});we.ReadlineParser=void 0;const xr=ye;class Rr extends xr.DelimiterParser{constructor(t){const e={delimiter:Buffer.from(`
`,"utf8"),encoding:"utf8",...t};typeof e.delimiter=="string"&&(e.delimiter=Buffer.from(e.delimiter,e.encoding)),super(e)}}we.ReadlineParser=Rr;Object.defineProperty(ke,"__esModule",{value:!0});ke.linuxList=kr;const jr=Nr,Ar=we;function Mr(r){return/(tty(S|WCH|ACM|USB|AMA|MFD|O|XRUSB)|rfcomm)/.test(r)&&r}function Ir(r){return{DEVNAME:"path",ID_VENDOR_ENC:"manufacturer",ID_SERIAL_SHORT:"serialNumber",ID_VENDOR_ID:"vendorId",ID_MODEL_ID:"productId",DEVLINKS:"pnpId",ID_USB_VENDOR_ENC:"manufacturer",ID_USB_SERIAL_SHORT:"serialNumber",ID_USB_VENDOR_ID:"vendorId",ID_USB_MODEL_ID:"productId"}[r.toUpperCase()]}function $r(r){return r.replace(/\\x([a-fA-F0-9]{2})/g,(t,e)=>String.fromCharCode(parseInt(e,16)))}function Lr(r,t){if(r==="pnpId"){const e=t.match(/\/by-id\/([^\s]+)/);return(e==null?void 0:e[1])||void 0}return r==="manufacturer"?$r(t):/^0x/.test(t)?t.substr(2):t}function kr(r=jr.spawn){const t=[],e=r("udevadm",["info","-e"]),i=e.stdout.pipe(new Ar.ReadlineParser);let o=!1,a={path:"",manufacturer:void 0,serialNumber:void 0,pnpId:void 0,locationId:void 0,vendorId:void 0,productId:void 0};return i.on("data",l=>{const d=l.slice(0,1),f=l.slice(3);if(d==="P"){a={path:"",manufacturer:void 0,serialNumber:void 0,pnpId:void 0,locationId:void 0,vendorId:void 0,productId:void 0},o=!1;return}if(!o){if(d==="N"){Mr(f)?t.push(a):o=!0;return}if(d==="E"){const u=f.match(/^(.+)=(.*)/);if(!u)return;const n=Ir(u[1]);if(!n)return;a[n]=Lr(n,u[2])}}}),new Promise((l,d)=>{e.on("close",f=>{f&&d(new Error(`Error listing ports udevadm exited with error code: ${f}`))}),e.on("error",d),i.on("error",d),i.on("finish",()=>l(t))})}var Ur=C&&C.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(H,"__esModule",{value:!0});H.LinuxPortBinding=H.LinuxBinding=void 0;const Wr=Ur(J),zr=ke,Vr=Ie,qr=$e,Hr=Le,L=B,R=(0,Wr.default)("serialport/bindings-cpp");H.LinuxBinding={list(){return R("list"),(0,zr.linuxList)()},async open(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError('"options" is not an object');if(!r.path)throw new TypeError('"path" is not a valid port');if(!r.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');R("open");const t=Object.assign({vmin:1,vtime:0,dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,xon:!1,xoff:!1,xany:!1,hupcl:!0},r),e=await(0,L.asyncOpen)(t.path,t);return this.fd=e,new it(e,t)}};class it{constructor(t,e){this.fd=t,this.openOptions=e,this.poller=new Vr.Poller(t),this.writeOperation=null}get isOpen(){return this.fd!==null}async close(){if(R("close"),!this.isOpen)throw new Error("Port is not open");const t=this.fd;this.poller.stop(),this.poller.destroy(),this.fd=null,await(0,L.asyncClose)(t)}async read(t,e,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" is not a Buffer');if(typeof e!="number"||isNaN(e))throw new TypeError(`"offset" is not an integer got "${isNaN(e)?"NaN":typeof e}"`);if(typeof i!="number"||isNaN(i))throw new TypeError(`"length" is not an integer got "${isNaN(i)?"NaN":typeof i}"`);if(R("read"),t.length<e+i)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");return(0,qr.unixRead)({binding:this,buffer:t,offset:e,length:i})}async write(t){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" is not a Buffer');if(R("write",t.length,"bytes"),!this.isOpen)throw R("write","error port is not open"),new Error("Port is not open");return this.writeOperation=(async()=>{t.length!==0&&(await(0,Hr.unixWrite)({binding:this,buffer:t}),this.writeOperation=null)})(),this.writeOperation}async update(t){if(!t||typeof t!="object"||Array.isArray(t))throw TypeError('"options" is not an object');if(typeof t.baudRate!="number")throw new TypeError('"options.baudRate" is not a number');if(R("update"),!this.isOpen)throw new Error("Port is not open");await(0,L.asyncUpdate)(this.fd,t)}async set(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError('"options" is not an object');if(R("set"),!this.isOpen)throw new Error("Port is not open");await(0,L.asyncSet)(this.fd,t)}async get(){if(R("get"),!this.isOpen)throw new Error("Port is not open");return(0,L.asyncGet)(this.fd)}async getBaudRate(){if(R("getBaudRate"),!this.isOpen)throw new Error("Port is not open");return(0,L.asyncGetBaudRate)(this.fd)}async flush(){if(R("flush"),!this.isOpen)throw new Error("Port is not open");await(0,L.asyncFlush)(this.fd)}async drain(){if(R("drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await(0,L.asyncDrain)(this.fd)}}H.LinuxPortBinding=it;var z={},be={};Object.defineProperty(be,"__esModule",{value:!0});be.serialNumParser=void 0;const Gr=[/USB\\(?:.+)\\(.+)/,/FTDIBUS\\(?:.+)\+(.+?)A?\\.+/],Jr=r=>{if(!r)return null;for(const t of Gr){const e=r.match(t);if(e)return e[1]}return null};be.serialNumParser=Jr;var Je;function Ze(){if(Je)return z;Je=1;var r=C&&C.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(z,"__esModule",{value:!0}),z.WindowsPortBinding=z.WindowsBinding=void 0;const t=r(J),e=st(),i=B,o=be,a=(0,t.default)("serialport/bindings-cpp");z.WindowsBinding={async list(){return(await(0,i.asyncList)()).map(f=>{if(f.pnpId&&!f.serialNumber){const u=(0,o.serialNumParser)(f.pnpId);if(u)return Object.assign(Object.assign({},f),{serialNumber:u})}return f})},async open(d){if(!d||typeof d!="object"||Array.isArray(d))throw new TypeError('"options" is not an object');if(!d.path)throw new TypeError('"path" is not a valid port');if(!d.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');a("open");const f=Object.assign({dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,rtsMode:"handshake",xon:!1,xoff:!1,xany:!1,hupcl:!0},d),u=await(0,i.asyncOpen)(f.path,f);return new l(u,f)}};class l{constructor(f,u){this.fd=f,this.openOptions=u,this.writeOperation=null}get isOpen(){return this.fd!==null}async close(){if(a("close"),!this.isOpen)throw new Error("Port is not open");const f=this.fd;this.fd=null,await(0,i.asyncClose)(f)}async read(f,u,n){if(!Buffer.isBuffer(f))throw new TypeError('"buffer" is not a Buffer');if(typeof u!="number"||isNaN(u))throw new TypeError(`"offset" is not an integer got "${isNaN(u)?"NaN":typeof u}"`);if(typeof n!="number"||isNaN(n))throw new TypeError(`"length" is not an integer got "${isNaN(n)?"NaN":typeof n}"`);if(a("read"),f.length<u+n)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");try{return{bytesRead:await(0,i.asyncRead)(this.fd,f,u,n),buffer:f}}catch(s){throw this.isOpen?s:new e.BindingsError(s.message,{canceled:!0})}}async write(f){if(!Buffer.isBuffer(f))throw new TypeError('"buffer" is not a Buffer');if(a("write",f.length,"bytes"),!this.isOpen)throw a("write","error port is not open"),new Error("Port is not open");return this.writeOperation=(async()=>{f.length!==0&&(await(0,i.asyncWrite)(this.fd,f),this.writeOperation=null)})(),this.writeOperation}async update(f){if(!f||typeof f!="object"||Array.isArray(f))throw TypeError('"options" is not an object');if(typeof f.baudRate!="number")throw new TypeError('"options.baudRate" is not a number');if(a("update"),!this.isOpen)throw new Error("Port is not open");await(0,i.asyncUpdate)(this.fd,f)}async set(f){if(!f||typeof f!="object"||Array.isArray(f))throw new TypeError('"options" is not an object');if(a("set",f),!this.isOpen)throw new Error("Port is not open");await(0,i.asyncSet)(this.fd,f)}async get(){if(a("get"),!this.isOpen)throw new Error("Port is not open");return(0,i.asyncGet)(this.fd)}async getBaudRate(){if(a("getBaudRate"),!this.isOpen)throw new Error("Port is not open");return(0,i.asyncGetBaudRate)(this.fd)}async flush(){if(a("flush"),!this.isOpen)throw new Error("Port is not open");await(0,i.asyncFlush)(this.fd)}async drain(){if(a("drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await(0,i.asyncDrain)(this.fd)}}return z.WindowsPortBinding=l,z}var Zr={},Ke;function st(){return Ke||(Ke=1,function(r){var t=C&&C.__createBinding||(Object.create?function(n,s,c,h){h===void 0&&(h=c);var g=Object.getOwnPropertyDescriptor(s,c);(!g||("get"in g?!s.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return s[c]}}),Object.defineProperty(n,h,g)}:function(n,s,c,h){h===void 0&&(h=c),n[h]=s[c]}),e=C&&C.__exportStar||function(n,s){for(var c in n)c!=="default"&&!Object.prototype.hasOwnProperty.call(s,c)&&t(s,n,c)},i=C&&C.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(r,"__esModule",{value:!0}),r.autoDetect=u;const o=i(J),a=q,l=H,d=Ze(),f=(0,o.default)("serialport/bindings-cpp");e(Zr,r),e(q,r),e(H,r),e(Ze(),r),e(K,r);function u(){switch(process.platform){case"win32":return f("loading WindowsBinding"),d.WindowsBinding;case"darwin":return f("loading DarwinBinding"),a.DarwinBinding;default:return f("loading LinuxBinding"),l.LinuxBinding}}}(ve)),ve}Object.defineProperty(ge,"__esModule",{value:!0});ge.SerialPort=void 0;const Kr=V,Qr=st(),Oe=(0,Qr.autoDetect)();class xe extends Kr.SerialPortStream{constructor(t,e){const i={binding:Oe,...t};super(i,e)}}w(xe,"list",Oe.list),w(xe,"binding",Oe);ge.SerialPort=xe;(function(r){var t=C&&C.__createBinding||(Object.create?function(i,o,a,l){l===void 0&&(l=a);var d=Object.getOwnPropertyDescriptor(o,a);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,l,d)}:function(i,o,a,l){l===void 0&&(l=a),i[l]=o[a]}),e=C&&C.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,i,a)};Object.defineProperty(r,"__esModule",{value:!0}),e(ie,r),e(se,r),e(X,r),e(oe,r),e(ae,r),e(ue,r),e(ce,r),e(le,r),e(Qe,r),e(he,r),e(pe,r),e(ge,r)})(Re);const Xr=pt(Re),nn=gt({__proto__:null,default:Xr},[Re]);export{nn as i};
